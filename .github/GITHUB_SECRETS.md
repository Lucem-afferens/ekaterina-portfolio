# GitHub Secrets для автоматического деплоя

Для автоматического деплоя темы Portfolio через GitHub Actions необходимо создать следующие секреты в вашем репозитории.

## Как добавить секреты в GitHub

1. Откройте ваш репозиторий на GitHub
2. Перейдите в **Settings** (Настройки)
3. В левом меню выберите **Secrets and variables** → **Actions**
4. Нажмите **New repository secret**
5. Добавьте каждый секрет по очереди (см. список ниже)

## Необходимые секреты

### 1. `FTP_HOST`
**Описание:** FTP/SFTP хост сервера  
**Пример:** `ftp.ekaterina-shul.ru` или IP-адрес  
**Обязательно:** Да

### 2. `FTP_PORT`
**Описание:** Порт для подключения  
**Пример:** `21` (для FTP) или `22` (для SFTP)  
**Значение по умолчанию:** `21`  
**Обязательно:** Да

### 3. `FTP_USER`
**Описание:** Имя пользователя FTP/SFTP  
**Пример:** `username`  
**Обязательно:** Да

### 4. `FTP_PASS`
**Описание:** Пароль для FTP/SFTP доступа  
**Пример:** `your_password_here`  
**Обязательно:** Да  
**⚠️ ВАЖНО:** Никогда не коммитьте пароль в репозиторий!

### 5. `FTP_PATH`
**Описание:** Путь на сервере к директории тем WordPress  
**Пример:** `/public_html/wp-content/themes/`  
**Альтернативный пример для Beget:** `/home/u/username/ekaterina-shul.ru/public_html/wp-content/themes/`  
**Обязательно:** Да

### 6. `FTP_PROTOCOL`
**Описание:** Протокол подключения  
**Возможные значения:** `ftp` или `sftp`  
**Рекомендуется:** `sftp` (более безопасный)  
**Значение по умолчанию:** `ftp`  
**Обязательно:** Нет (по умолчанию будет использован FTP)

## Пример заполнения секретов для Beget

```
FTP_HOST = ftp.ekaterina-shul.ru
FTP_PORT = 21
FTP_USER = u1234567890
FTP_PASS = ваш_пароль_от_ftp
FTP_PATH = /public_html/wp-content/themes/
FTP_PROTOCOL = ftp
```

## Проверка секретов

После добавления всех секретов:
1. Сделайте commit и push в ветку `main` (или в ветку, указанную в workflow)
2. Перейдите в раздел **Actions** вашего репозитория на GitHub
3. Убедитесь, что workflow запустился и выполнился успешно

## Безопасность

- ✅ Все секреты хранятся в зашифрованном виде
- ✅ Секреты не отображаются в логах GitHub Actions
- ✅ Доступ к секретам имеют только владельцы репозитория
- ❌ НЕ добавляйте секреты в файлы `.env.deploy` или другие конфигурационные файлы, которые могут быть закоммичены

## Устранение проблем

### Деплой не запускается
- Проверьте, что вы пушите в правильную ветку (`main` по умолчанию)
- Убедитесь, что все секреты добавлены правильно
- Проверьте раздел **Actions** на наличие ошибок

### Ошибка подключения к FTP
- Проверьте правильность `FTP_HOST`, `FTP_PORT`, `FTP_USER`, `FTP_PASS`
- Убедитесь, что ваш FTP аккаунт активен
- Попробуйте подключиться вручную через FTP клиент для проверки

### Ошибка при загрузке файлов
- Проверьте правильность `FTP_PATH`
- Убедитесь, что у FTP пользователя есть права на запись в указанную директорию
- Проверьте, что на сервере достаточно места

## Изменение настроек деплоя

Если вы хотите изменить ветку для деплоя или другие параметры:
1. Откройте файл `.github/workflows/deploy.yml`
2. Найдите строку `branches: - main`
3. Измените `main` на нужную ветку
4. Закоммитьте изменения

